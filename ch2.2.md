## R 的數學運算及邏輯判斷

### 數學運算

#### 四則運算

加減乘除代表的運算符號分別為 +, -, *, /。

> 例：5 + 5

```R
> 5+5
[1] 10
```

> 例: 3-5

```R
> 3-5
[1] -2
```

> 例: 5 ** 2

```R
> 5 ** 2
[1] 25
```

下表整理 R 所支援的常見的數學運算子(arithmetic operators)

| 運算子  | 說明          | 範例     |
| ------- | ------------- | -------- |
| +       | 加            | 3 + 3    |
| -       | 減            | 5 - 1    |
| *       | 乘            | 2 * 2    |
| /       | 除            | 2 / 3    |
| ^ 或 ** | 指數          | 5 ** 2   |
| x %% y  | x 除 y 的餘數 | 5 %% 3   |
| x %/% y | x 除 y 的商數 | 13 %/% 2 |

另外像是 $$\pi$$、對數、加總等則是使用函式的方式，例如

```R
# pi 是常數
> pi
[1] 3.141593
```

對數計算(logarithm)：

```R
# 以 10 為底
> log10(10)
[1] 1
# natural log
> log(10)
[1] 2.302585
```

指數(exponential):

```R
> exp(10)
[1] 22026.47
```

加總(summation):

```R
> sum(1,3,5,7,9)
[1] 25
```

極值(maximum or minimum values)，可使用 ```max()``` 及 ```min()``` 
來分別計算最大值及最小值:

```R
> x <- c(3, 5, 7, 1, 4, 2)
> max(x)
[1] 7
> min(x)
[1] 1
```

平均數(mean):

```R
> x <- c(3, 5, 7, 1, 4, 2)
> mean(x)
[1] 3.666666
```

標準差(standard deviation):

```R
> x <- c(3, 5, 7, 1, 4, 2)
> sd(x)
[1] 2.160246
```

開根號(square root):

```R
> sqrt(10)
[1] 3.162278
```

你可能會發現上面的例子數字都只有七個位數，這是 R 裡頭預設的顯示位數，
如果你想增加顯示的位數的話，可以使用 ```option()``` 來設定，

```R
# 設定 10 位數字
> options(digits = 10)
> pi
[1] 3.141592654
# 設定 20 位數字
> options(digits = 20)
> pi
[1] 3.141592653589793116
```

#### 矩陣運算

假設 A, B 兩個為 $$3 \times 3$$ 的矩陣要相乘，
這兩個矩陣分別是 A 與 B，要怎麼計算呢？

$$
\mathbf{A}~=~\left[
\begin{array}{ccc}
1 & 4 & 2 \\
3 & 2 & 3 \\
2 & 3 & 1
\end{array}\right]_{~3\times3},~\mathbf{B}~=~
\left[\begin{array}{ccc}
2 & 4 & 1 \\
1 & 1 & 2 \\
3 & 5 & 2
\end{array}\right]_{~3\times3}
$$

如果是矩陣的相乘，即積(dot)，是 ```%*%```，
而 ```*``` 則是元素之間的相乘(即 $$A_{ij}\times B_{ij}$$)，做法如下：

```R
# 在 R 內產生矩陣的方式為 matrix(data, nrow, ncol)
# data 是這個矩陣的數值, nrow 表示有幾列, ncol 是幾欄
# 預設會從第一欄第一列依序照欄排列數字，如果要按照列排列數字，
# 則參數為 byrow=T}
> A <- matrix(c(1,3,2,4,2,3,2,3,1),3,3)
> B <- matrix(c(2,1,3,4,1,5,1,2,2),3,3)
# A dot B
> A%*%B
     [,1] [,2] [,3]
[1,]   12   18   13
[2,]   17   29   13
[3,]   10   16   10
# A 乘 B (元素相乘)
> A*B
    [,1] [,2] [,3]
[1,]    2   16    2
[2,]    3    2    6
[3,]    6   15    2

```

而矩陣的轉置(transpose)則是使用 ```t()```:

```R
> A <- matrix(c(1,3,2,4,2,3,2,3,1),3,3)
> A
     [,1] [,2] [,3]
[1,]    1    4    2
[2,]    3    2    3
[3,]    2    3    1
# 轉置矩陣
> t(A)
     [,1] [,2] [,3]
[1,]    1    3    2
[2,]    4    2    3
[3,]    2    3    1

```


以上簡單介紹數學計算，進階的數學運算語法可使用 ```?plotmath``` 查詢。

### 邏輯判斷

除了數學運算外，在 R 裡頭該如何進行邏輯判斷呢？例如 A > B 這樣的計算，該怎麼表示呢？下表為 R 中所支援的邏輯判斷

| 邏輯判斷 |  說明              |
| -------  |  ----------------- |
|  >       |  大於              |
|  <       |  小於              |
|  >=      |  大於等於          |
|  <=      |  小於等於          |
|  ==      |  相等              |
|  !=      |  不相等            |
|  !a      |  不等於a           |
|  a \| b   |  a或b              |
|  a & b   |  a而且b            |

邏輯判斷的結果則是真(TRUE)、偽(FALSE)及 NA (not available)，例如：

```R
> 5 > 3
[1] TRUE
> 3 != 3
[1] FALSE
> 3 == 3
[1] TRUE
> 3 <= 3
[1] TRUE
```
